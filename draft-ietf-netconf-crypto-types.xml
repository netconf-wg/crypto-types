<?xml version='1.0'?>
<!DOCTYPE rfc SYSTEM "rfc2629.dtd">
<?rfc toc="yes"?>
<?rfc symrefs="yes"?>
<?rfc sortrefs="yes" ?>
<?rfc compact="yes"?>
<?rfc subcompact="no"?>
<?rfc linkmailto="no" ?>
<?rfc editing="no" ?>
<?rfc comments="yes" ?>
<?rfc inline="yes"?>
<?rfc rfcedstyle="yes"?>
<!-- <?rfc-ext allow-markup-in-artwork="yes" ?> what does this do? -->
<?rfc-ext include-index="no" ?>
<!--<?rfc strict="no"?> -->
<rfc xmlns:xiax="https://watsen.net/xiax" category="std" ipr="trust200902" docName="draft-ietf-netconf-crypto-types-latest">
    <front>
        <title>Common YANG Data Types for Cryptography</title>
        <author initials="K." surname="Watsen" fullname="Kent Watsen">
            <organization>Watsen Networks</organization>
            <address>
                <email>kent+ietf@watsen.net</email>
            </address>
        </author>
        <author initials="H." surname="Wang" fullname="Wang Haiguang">
            <organization>Huawei</organization>
            <address>
                <email>wang.haiguang.shieldlab@huawei.com</email>
            </address>
        </author>
        <date/>
        <area>Operations</area>
        <workgroup>NETCONF Working Group</workgroup>
        <abstract>
          <t>This document defines YANG identities, typedefs, the groupings
          useful for cryptographic applications.</t>
        </abstract>
        <note title="Editorial Note (To be removed by RFC Editor)">
          <t>This draft contains many placeholder values that need to be replaced
          with finalized values at the time of publication.  This note summarizes
          all of the substitutions that are needed.  No other RFC Editor 
          instructions are specified elsewhere in this document.</t>

          <t>Artwork in this document contains shorthand references to drafts in 
          progress.  Please apply the following replacements:
            <list style="symbols">
              <t><spanx style="verb">XXXX</spanx> --&gt; the assigned RFC value for this draft</t>
            </list>
          </t>
          <t>Artwork in this document contains placeholder values for the date
          of publication of this draft.  Please apply the following replacement:
            <list style="symbols">
              <t><spanx style="verb">YYYY-MM-DD</spanx> --&gt; the publication date of this draft</t>
            </list>
          </t>
          <t>The following Appendix section is to be removed prior to publication:
            <list style="symbols">
              <t>Appendix B.  Change Log</t>
            </list>
          </t>
        </note>
    </front>
    <middle>
      <section title="Introduction">

        <t>This document defines a YANG 1.1 <xref target="RFC7950"/> module
        specifying identities, typedefs, and groupings useful for cryptography.</t>

        <t>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL
        NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED",
        "MAY", and "OPTIONAL" in this document are to be interpreted as
        described in BCP 14 <xref target="RFC2119"/> <xref target="RFC8174"/>
        when, and only when, they appear in all capitals, as shown here.</t>
      </section>

      <section title="The Crypto Types Module">

        <section title="Tree Diagram">
          <t>This section provides a tree diagram <xref target="RFC8340"/> for
          the "ietf-crypto-types" module.  Only the groupings as represented,
          as tree diagrams have no means to represent identities or typedefs.</t>

          <t><!--The following tree diagram has used groupings expanded:-->
            <figure>
              <artwork xiax:gen="xiax/gen-crypto-types-tree@YYYY-MM-DD.txt"/>
            </figure>
          </t>
        </section>

 
        <section title="YANG Module" anchor="keystore-yang-module">
          <t>This module has normative references to <xref target="RFC2404"/>,
          <xref target="RFC3565"/>, <xref target="RFC3686"/>, <xref target="RFC4106"/>,
          <xref target="RFC4253"/>, <xref target="RFC4279"/>, <xref target="RFC4309"/>, 
          <xref target="RFC4494"/>, <xref target="RFC4543"/>, <xref target="RFC4868"/>, 
          <xref target="RFC5280"/>, <xref target="RFC5652"/>, <xref target="RFC5656"/>, 
          <xref target="RFC6187"/>, <xref target="RFC6991"/>, <xref target="RFC7919"/>, 
          <xref target="RFC8268"/>, <xref target="RFC8332"/>, <xref target="RFC8341"/>,
          <xref target="RFC8422"/>, <xref target="RFC8446"/>, and <xref target="ITU.X690.2015"/>.</t>
          <t>This module has an informational reference to <xref target="RFC2986"/>,
          <xref target="RFC3174"/>, <xref target="RFC4493"/>, <xref target="RFC5915"/>,
          <xref target="RFC6125"/>, <xref target="RFC6234"/>, <xref target="RFC6239"/>,
          <xref target="RFC6507"/>, <xref target="RFC8017"/>, <xref target="RFC8032"/>,
          <xref target="RFC8439"/>.</t>
          <t>
            <figure>
              <artwork xiax:src="ietf-crypto-types@YYYY-MM-DD.yang" xiax:markers="true" xiax:val="xiax/val-yang-ietf-crypto-types.xml"/>
            </figure>
          </t>
        </section>
      </section>

      <section title="Security Considerations">
        <t>In order to use YANG identities for algorithm identifiers, only
        the most commonly used RSA key lengths are supported for the RSA
        algorithm.  Additional key lengths can be defined in another module
        or added into a future version of this document.</t>

        <t>This document limits the number of elliptical curves supported.
        This was done to match industry trends and IETF best practice (e.g.,
        matching work being done in TLS 1.3).  If additional algorithms are
        needed, they can be defined by another module or added into a future
        version of this document.</t>

        <t>Some of the operations in this YANG module may be considered sensitive or
        vulnerable in some network environments. It is thus important to control access
        to these operations. These are the operations and their sensitivity/vulnerability:
          <list style="hanging" hangIndent="6">
            <t hangText="   generate-certificate-signing-request:">For this action,
              it is RECOMMENDED that implementations assert channel binding <xref target="RFC5056"/>,
              so as to ensure that the application layer that sent the request is the same
              as the device authenticated when the secure transport layer was established.</t>
          </list>
        </t>

        <t>This document uses PKCS #10 <xref target="RFC2986"/> for the
        "generate-certificate-signing-request" action.  The use of Certificate
        Request Message Format (CRMF) <xref target="RFC4211"/> was considered,
        but is was unclear if there was market demand for it.  If it is desired 
        to support CRMF in the future, placing a "choice" statement in both
        the input and output statements, along with an "if-feature" statement
        on the CRMF option, would enable a backwards compatible solution.</t>

        <t>NACM:default-deny-all is set on asymmetric-key-pair-grouping's
        "private-key" node, as private keys should never be revealed without
        explicit permission.</t>
      </section>

      <section title="IANA Considerations">
        <section title="The IETF XML Registry">
          <t>This document registers one URI in the "ns" subregistry
          of the IETF XML Registry <xref target="RFC3688"/>.  Following
          the format in <xref target="RFC3688"/>, the following
          registration is requested:</t>
          <t>
            <figure>
              <artwork>
   URI: urn:ietf:params:xml:ns:yang:ietf-crypto-types
   Registrant Contact: The NETCONF WG of the IETF.
   XML: N/A, the requested URI is an XML namespace.</artwork>
            </figure>
          </t>
        </section>
        <section title="The YANG Module Names Registry">
          <t>This document registers one YANG module in the
          YANG Module Names registry <xref target="RFC6020"/>.
          Following the format in <xref target="RFC6020"/>, the
          the following registration is requested:</t>
          <t>
            <figure>
              <artwork>
   name:         ietf-crypto-types
   namespace:    urn:ietf:params:xml:ns:yang:ietf-crypto-types
   prefix:       ct
   reference:    RFC XXXX</artwork>
            </figure>
          </t>
        </section>
      </section>


    </middle>

    <back>
      <references title="Normative References">
        <?rfc include="reference.RFC.2119.xml"?>
        <?rfc include="reference.RFC.2404.xml"?>
        <?rfc include="reference.RFC.3565.xml"?>
        <?rfc include="reference.RFC.3686.xml"?>
        <?rfc include="reference.RFC.4106.xml"?>
        <?rfc include="reference.RFC.4253.xml"?>
        <?rfc include="reference.RFC.4279.xml"?>
        <?rfc include="reference.RFC.4309.xml"?>
        <?rfc include="reference.RFC.4494.xml"?>
        <?rfc include="reference.RFC.4543.xml"?>
        <?rfc include="reference.RFC.4868.xml"?>
        <?rfc include="reference.RFC.5280.xml"?>
        <?rfc include="reference.RFC.5652.xml"?>
        <?rfc include="reference.RFC.5656.xml"?>
        <?rfc include="reference.RFC.6187.xml"?>
        <?rfc include="reference.RFC.6991.xml"?>
        <?rfc include="reference.RFC.7919.xml"?>
        <?rfc include="reference.RFC.7950.xml"?>
        <?rfc include="reference.RFC.8174.xml"?>
        <?rfc include="reference.RFC.8268.xml"?>
        <?rfc include="reference.RFC.8332.xml"?>
        <?rfc include="reference.RFC.8341.xml"?>
        <?rfc include="reference.RFC.8422.xml"?>
        <?rfc include="reference.RFC.8446.xml"?>

        <!-- THE FOLLOWING LINE DOESN'T RESOLVE BECAUSE _reference.ITU.X744.1996.xml
             DOES NOT EXIST HERE: http://xml2rfc.tools.ietf.org/public/rfc/bibxml2/
             <?rfc include="reference.ITU.X690.2015.xml"?> -->
        <reference anchor="ITU.X690.2015" target="https://www.itu.int/rec/T-REC-X.690/">
          <front>
            <title>Information Technology - ASN.1 encoding rules: Specification of Basic
            Encoding Rules (BER), Canonical Encoding Rules (CER) and Distinguished
            Encoding Rules (DER)</title>
            <author>
              <organization>International Telecommunication Union</organization>
            </author>
            <date month="August" year="2015"/>
          </front>
          <seriesInfo name="ITU-T Recommendation X.690," value="ISO/IEC 8825-1"/>
	    </reference>
      </references>
      <references title="Informative References">
        <?rfc include="reference.RFC.2986.xml"?>
        <?rfc include="reference.RFC.3174.xml"?>
        <?rfc include="reference.RFC.3688.xml"?>
        <?rfc include="reference.RFC.4211.xml"?>
        <?rfc include="reference.RFC.4493.xml"?>
        <?rfc include="reference.RFC.5056.xml"?>
        <?rfc include="reference.RFC.5915.xml"?>
        <?rfc include="reference.RFC.6020.xml"?>
        <?rfc include="reference.RFC.6125.xml"?>
        <?rfc include="reference.RFC.6234.xml"?>
        <?rfc include="reference.RFC.6239.xml"?>
        <?rfc include="reference.RFC.6507.xml"?>
        <?rfc include="reference.RFC.8017.xml"?>
        <?rfc include="reference.RFC.8032.xml"?>
        <?rfc include="reference.RFC.8340.xml"?>
        <?rfc include="reference.RFC.8439.xml"?>
      </references>

      <section title="Examples">
        <section title="The &quot;asymmetric-key-pair-with-certs-grouping&quot; Grouping">
          <t>The following example module has been constructed to illustrate
          use of the "asymmetric-key-pair-with-certs-grouping" grouping defined
          in the "ietf-crypto-types" module.</t>
          <t>Note that the "asymmetric-key-pair-with-certs-grouping" grouping uses both
          the "asymmetric-key-pair-grouping" and "end-entity-cert-grouping" groupings,
          and that the "asymmetric-key-pair-grouping" grouping uses the 
          "public-key-grouping" grouping.  Thus, a total of four of the five groupings
          defined in the "ietf-crypto-types" module are illustrated through the
          use of this one grouping.  The only grouping not represented is the
          "trust-anchor-cert-grouping" grouping.</t>
          <t>
            <figure>
              <artwork xiax:src="ex-crypto-types-usage.yang" xiax:val="xiax/val-yang-ex-crypto-types-usage@YYYY-MM-DD.xml"/>
            </figure>
          </t>

          <t>Given the above example usage module, the following example
          illustrates some configured keys.</t>
          <t>
            <figure>
              <artwork xiax:src="refs/ex-crypto-types-usage.xml" xiax:val="xiax/val-xml-ex-crypto-types-usage@YYYY-MM-DD.xml"/>
            </figure>
          </t>
        </section>

        <section title="The &quot;generate-hidden-key&quot; Action">
          <t>The following example illustrates the "generate-hidden-key" action
          in use with the NETCONF protocol.</t>
          <t>
            <figure>
              <preamble>REQUEST</preamble>
              <artwork xiax:src="refs/ex-crypto-types-ghk-rpc.xml"/><!-- xiax:val="xiax/val-xml-ex-crypto-types-ghk-rpc@YYYY-MM-DD.xml"/>-->
            </figure>
            <figure>
              <preamble>RESPONSE</preamble>
              <artwork xiax:src="refs/ex-crypto-types-ghk-rpc-reply.xml"/><!-- xiax:val="xiax/val-xml-ex-crypto-types-ghk-rpc-reply@YYYY-MM-DD.xml"/>-->
            </figure>
          </t>
        </section>

        <section title="The &quot;install-hidden-key&quot; Action">
          <t>The following example illustrates the "install-hidden-key" action
          in use with the NETCONF protocol.</t>
          <t>
            <figure>
              <preamble>REQUEST</preamble>
              <artwork xiax:src="refs/ex-crypto-types-ihk-rpc.xml"/>
            </figure>
            <figure>
              <preamble>RESPONSE</preamble>
              <artwork xiax:src="refs/ex-crypto-types-ihk-rpc-reply.xml"/>
            </figure>
          </t>
        </section>

        <section title="The &quot;generate-certificate-signing-request&quot; Action">
          <t>The following example illustrates the "generate-certificate-signing-request"
          action in use with the NETCONF protocol.</t>
          <t>
            <figure>
              <preamble>REQUEST</preamble>
              <artwork xiax:src="refs/ex-crypto-types-gcsr-rpc.xml"/>
            </figure>
            <figure>
              <preamble>RESPONSE</preamble>
              <artwork xiax:src="refs/ex-crypto-types-gcsr-rpc-reply.xml"/>
            </figure>
          </t>
        </section>

        <section title="The &quot;certificate-expiration&quot; Notification">
          <t>The following example illustrates the "certificate-expiration"
          notification in use with the NETCONF protocol.</t>
          <t>
            <figure>
              <artwork xiax:src="refs/ex-crypto-types-ce-notification.xml"/>
            </figure>
          </t>
        </section>

      </section> <!-- end Examples -->


      <section title="Change Log">
        <section title="I-D to 00">
          <t>
            <list style="symbols">
              <t>Removed groupings and notifications.</t>
              <t>Added typedefs for identityrefs.</t>
              <t>Added typedefs for other RFC 5280 structures.</t>
              <t>Added typedefs for other RFC 5652 structures.</t>
              <t>Added convenience typedefs for RFC 4253, RFC 5280, and RFC 5652.</t>
            </list>
          </t>
        </section>
        <section title="00 to 01">
          <t>
            <list style="symbols">
              <t>Moved groupings from the draft-ietf-netconf-keystore here.</t>
            </list>
          </t>
        </section>
        <section title="01 to 02">
          <t>
            <list style="symbols">
              <t>Removed unwanted "mandatory" and "must" statements.</t>
              <t>Added many new crypto algorithms (thanks Haiguang!)</t>
              <t>Clarified in asymmetric-key-pair-with-certs-grouping,
                 in certificates/certificate/name/description, that 
                 if the name MUST NOT match the name of a certificate
                 that exists independently in &lt;operational&gt;, enabling
                 certs installed by the manufacturer (e.g., an IDevID).</t>
            </list>
          </t>
        </section>
        <section title="02 to 03">
          <t>
            <list style="symbols">
              <t>renamed base identity 'asymmetric-key-encryption-algorithm' to 'asymmetric-key-algorithm'.</t>
              <t>added new 'asymmetric-key-algorithm' identities for secp192r1, secp224r1, secp256r1,
                 secp384r1, and secp521r1.</t>
               <t>removed 'mac-algorithm' identities for mac-aes-128-ccm, mac-aes-192-ccm, mac-aes-256-ccm,
                 mac-aes-128-gcm, mac-aes-192-gcm, mac-aes-256-gcm, and mac-chacha20-poly1305.</t>
               <t>for all -cbc and -ctr identities, renamed base identity 'symmetric-key-encryption-algorithm'
                 to 'encryption-algorithm'.</t>
               <t>for all -ccm and -gcm identities, renamed base identity 'symmetric-key-encryption-algorithm'
                 to 'encryption-and-mac-algorithm' and renamed the identity to remove the "enc-" prefix.</t>
               <t>for all the 'signature-algorithm' based identities, renamed from 'rsa-*' to 'rsassa-*'.</t>
               <t>removed all of the "x509v3-" prefixed 'signature-algorithm' based identities.</t>
               <t>added 'key-exchange-algorithm' based identities for 'rsaes-oaep' and 'rsaes-pkcs1-v1_5'.</t>
               <t>renamed typedef 'symmetric-key-encryption-algorithm-ref' to 'symmetric-key-algorithm-ref'.</t>
               <t>renamed typedef 'asymmetric-key-encryption-algorithm-ref' to 'asymmetric-key-algorithm-ref'.</t>
               <t>added typedef 'encryption-and-mac-algorithm-ref'.</t>
               <t>Updated copyright date, boilerplate template, affiliation, and folding algorithm.</t>
            </list>
          </t>
        </section>
        <section title="03 to 04">
          <t>
            <list style="symbols">
              <t>ran YANG module through formatter.</t>
            </list>
          </t>
        </section>
        <section title="04 to 05">
          <t>
            <list style="symbols">
              <t>fixed broken symlink causing reformatted YANG module to not show.</t>
            </list>
          </t>
        </section>
      </section>

      <section title="Acknowledgements" numbered="no">
        <t>The authors would like to thank for following for
        lively discussions on list and in the halls (ordered
        by last name):
Martin Bjorklund,
Balázs Kovács,
Eric Voit,
and Liang Xia.
       </t>
     </section>

   </back>
</rfc>
